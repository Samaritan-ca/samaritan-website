<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Samaritan - Contact Us</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.15/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">
        function ContactUsPage() {
            const [formData, setFormData] = React.useState({
                name: '',
                email: '',
                category: '',
                message: ''
            });
            const [errors, setErrors] = React.useState({});

            const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxSz3GVj3cvJOn7HMgzqE12lFgUXh3y_AigeOg-BCoWhIo-Qkt2jlgOvx9P3tJ4myE_/exec';

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            const validateForm = () => {
                const newErrors = {};
                if (!formData.name.trim()) newErrors.name = 'Name is required';
                if (!formData.email.trim() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email)) newErrors.email = 'Valid email is required';
                if (!formData.category) newErrors.category = 'Please select a category';
                if (!formData.message.trim()) newErrors.message = 'Message is required';
                return newErrors;
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                const newErrors = validateForm();
                if (Object.keys(newErrors).length > 0) {
                    setErrors(newErrors);
                    return;
                }
                try {
                    const queryString = new URLSearchParams(formData).toString();
                    const response = await fetch(`${GOOGLE_SCRIPT_URL}?${queryString}`);
                    const result = await response.json();
                    if (result.result === 'success') {
                        alert('Message sent successfully!');
                        setFormData({ name: '', email: '', category: '', message: '' });
                        setErrors({});
                    } else {
                        alert('Failed to send message.');
                    }
                } catch (error) {
                    alert('Error sending message.');
                    console.error(error);
                }
            };

            return (
                <div className="min-h-screen bg-gray-100 font-sans">
                    <header className="bg-white shadow-sm">
                        <nav className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                            <div className="flex items-center space-x-2">
                                <img src="splash.png" alt="Samaritan Logo" className="w-10 h-10 rounded-lg object-contain" />
                                <div className="text-2xl font-semibold text-gray-900">Samaritan</div>
                            </div>
                            <div className="space-x-4">
                                <a href="index.html" className="text-gray-600 hover:text-blue-600">Home</a>
                                <a href="legal.html" className="text-gray-600 hover:text-blue-600">Legal</a>
                                <a href="contact-us.html" className="text-gray-600 hover:text-blue-600">Contact Us</a>
                            </div>
                        </nav>
                    </header>

                    <section className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                        <h1 className="text-3xl sm:text-4xl font-bold text-gray-900 mb-8 text-center">Contact Us</h1>
                        <p className="text-lg text-gray-600 mb-8 text-center max-w-2xl mx-auto">
                            Have a question, issue, or feedback? Fill out the form below, and we'll get back to you as soon as possible.
                        </p>
                        <form onSubmit={handleSubmit} className="bg-white p-8 rounded-lg shadow-sm space-y-6">
                            <div>
                                <label htmlFor="name" className="block text-sm font-medium text-gray-700">Full Name</label>
                                <input type="text" name="name" id="name" value={formData.name} onChange={handleChange}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm p-2"
                                    placeholder="Your full name" />
                                {errors.name && <p className="mt-1 text-sm text-red-600">{errors.name}</p>}
                            </div>
                            <div>
                                <label htmlFor="email" className="block text-sm font-medium text-gray-700">Email Address</label>
                                <input type="email" name="email" id="email" value={formData.email} onChange={handleChange}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm p-2"
                                    placeholder="Your email address" />
                                {errors.email && <p className="mt-1 text-sm text-red-600">{errors.email}</p>}
                            </div>
                            <div>
                                <label htmlFor="category" className="block text-sm font-medium text-gray-700">Category</label>
                                <select name="category" id="category" value={formData.category} onChange={handleChange}
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm p-2">
                                    <option value="">Select a category</option>
                                    <option value="Report Issue">Report Issue</option>
                                    <option value="General Inquiry">General Inquiry</option>
                                    <option value="Feedback">Feedback</option>
                                    <option value="Partnership">Partnership</option>
                                    <option value="Technical Support">Technical Support</option>
                                </select>
                                {errors.category && <p className="mt-1 text-sm text-red-600">{errors.category}</p>}
                            </div>
                            <div>
                                <label htmlFor="message" className="block text-sm font-medium text-gray-700">Message</label>
                                <textarea name="message" id="message" value={formData.message} onChange={handleChange} rows="5"
                                    className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-600 focus:ring-blue-600 sm:text-sm p-2"
                                    placeholder="Your message"></textarea>
                                {errors.message && <p className="mt-1 text-sm text-red-600">{errors.message}</p>}
                            </div>
                            <div className="text-center">
                                <button type="submit"
                                    className="bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 transition">
                                    Send Message
                                </button>
                            </div>
                        </form>
                        <div className="mt-8 text-center">
                            <p className="text-gray-600">
                                Alternatively, you can reach us directly at{' '}
                                <a href="mailto:arman@samaritan-app.com" className="text-blue-600 hover:underline">
                                    arman@samaritan-app.com
                                </a>
                            </p>
                        </div>
                    </section>

                    <footer className="bg-gray-900 text-white py-8">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <p className="text-gray-400">Â© 2025 Samaritan. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<ContactUsPage />, document.getElementById('root'));
    </script>
</body>

</html>